import{s as je,a as f,n as Se,r as Oe}from"../chunks/scheduler.IfvzZrA9.js";import{S as ze,i as Ue,d as pe,q as be,v as Fe,e as h,s as k,c as _,l as K,g as w,a as W,f as b,m,h as le,j as s,o as ge,r as Ae,t as X,b as Z,k as $,u as Pe}from"../chunks/index.Di6lNc-9.js";import{g as Le}from"../chunks/globals.D0QH3NT1.js";const{console:Be}=Le,p="C:/Users/chorr/OneDrive/Desktop/lb-cal/src/routes/finalize/+page.svelte";function Ne(t,e,o){const a=t.slice();return a[7]=e[o],a[8]=e,a[9]=o,a}function He(t,e,o){const a=t.slice();return a[10]=e[o],a}function qe(t){let e,o=be(t[1]),a=[];for(let r=0;r<o.length;r+=1)a[r]=ke(He(t,o,r));const R={c:function(){e=h("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l:function(n){e=_(n,"DIV",{class:!0});var u=W(e);for(let l=0;l<a.length;l+=1)a[l].l(u);u.forEach(b),this.h()},h:function(){m(e,"class","messages-container s-pIbmxWkwpRfq"),f(e,p,64,4,2080)},m:function(n,u){le(n,e,u);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(e,null)},p:function(n,u){if(u&2){o=be(n[1]);let l;for(l=0;l<o.length;l+=1){const T=He(n,o,l);a[l]?a[l].p(T,u):(a[l]=ke(T),a[l].c(),a[l].m(e,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=o.length}},d:function(n){n&&b(e),Ae(a,n)}};return pe("SvelteRegisterBlock",{block:R,id:qe.name,type:"if",source:"(64:2) {#if messages.length > 0}",ctx:t}),R}function ke(t){let e,o=t[10].text+"",a,R;const r={c:function(){e=h("div"),a=X(o),R=k(),this.h()},l:function(u){e=_(u,"DIV",{class:!0});var l=W(e);a=Z(l,o),R=w(l),l.forEach(b),this.h()},h:function(){m(e,"class","success-message s-pIbmxWkwpRfq"),f(e,p,66,8,2157)},m:function(u,l){le(u,e,l),s(e,a),s(e,R)},p:function(u,l){l&2&&o!==(o=u[10].text+"")&&$(a,o)},d:function(u){u&&b(e)}};return pe("SvelteRegisterBlock",{block:r,id:ke.name,type:"each",source:"(66:6) {#each messages as message}",ctx:t}),r}function we(t){let e,o,a=t[7].inquiry_id+"",R,r,n,u=t[7].first_name+"",l,T,B=t[7].last_name+"",v,N,c,H=t[7].phone+"",x,Q,A,D=t[7].service+"",Y,ce,y,ae=(t[7].caliper_color||"N/A")+"",ne,L,ee,se=(t[7].wheel_color||"N/A")+"",z,he,G,j=new Date(t[7].date).toLocaleDateString()+"",ue,de,E,oe=(t[7].additional_details||"N/A")+"",ie,V,M,P,U,fe,F,C=t[7].isSaved?"Saved!":t[2]===t[7].inquiry_id?"Saving...":"Save",J,I,_e,O,d;function S(...g){return t[5](t[7],t[8],t[9],...g)}function q(){return t[6](t[7])}const re={c:function(){e=h("tr"),o=h("td"),R=X(a),r=k(),n=h("td"),l=X(u),T=k(),v=X(B),N=k(),c=h("td"),x=X(H),Q=k(),A=h("td"),Y=X(D),ce=k(),y=h("td"),ne=X(ae),L=k(),ee=h("td"),z=X(se),he=k(),G=h("td"),ue=X(j),de=k(),E=h("td"),ie=X(oe),V=k(),M=h("td"),P=h("input"),fe=k(),F=h("button"),J=X(C),_e=k(),this.h()},l:function(te){e=_(te,"TR",{});var i=W(e);o=_(i,"TD",{class:!0});var Ie=W(o);R=Z(Ie,a),Ie.forEach(b),r=w(i),n=_(i,"TD",{class:!0});var ve=W(n);l=Z(ve,u),T=w(ve),v=Z(ve,B),ve.forEach(b),N=w(i),c=_(i,"TD",{class:!0});var Re=W(c);x=Z(Re,H),Re.forEach(b),Q=w(i),A=_(i,"TD",{class:!0});var Te=W(A);Y=Z(Te,D),Te.forEach(b),ce=w(i),y=_(i,"TD",{class:!0});var xe=W(y);ne=Z(xe,ae),xe.forEach(b),L=w(i),ee=_(i,"TD",{class:!0});var De=W(ee);z=Z(De,se),De.forEach(b),he=w(i),G=_(i,"TD",{class:!0});var We=W(G);ue=Z(We,j),We.forEach(b),de=w(i),E=_(i,"TD",{class:!0});var ye=W(E);ie=Z(ye,oe),ye.forEach(b),V=w(i),M=_(i,"TD",{class:!0});var me=W(M);P=_(me,"INPUT",{type:!0,placeholder:!0,class:!0}),fe=w(me),F=_(me,"BUTTON",{class:!0});var Ee=W(F);J=Z(Ee,C),Ee.forEach(b),me.forEach(b),_e=w(i),i.forEach(b),this.h()},h:function(){m(o,"class","s-pIbmxWkwpRfq"),f(o,p,91,10,2752),m(n,"class","s-pIbmxWkwpRfq"),f(n,p,92,10,2793),m(c,"class","s-pIbmxWkwpRfq"),f(c,p,93,10,2854),m(A,"class","s-pIbmxWkwpRfq"),f(A,p,94,10,2890),m(y,"class","s-pIbmxWkwpRfq"),f(y,p,95,10,2928),m(ee,"class","s-pIbmxWkwpRfq"),f(ee,p,96,10,2981),m(G,"class","s-pIbmxWkwpRfq"),f(G,p,97,10,3032),m(E,"class","s-pIbmxWkwpRfq"),f(E,p,98,10,3098),m(P,"type","number"),m(P,"placeholder","Enter price"),P.value=U=t[7].quoted_price||"",m(P,"class","price-input s-pIbmxWkwpRfq"),f(P,p,100,12,3174),m(F,"class","action-button finalize-button s-pIbmxWkwpRfq"),F.disabled=I=t[2]===t[7].inquiry_id,f(F,p,107,12,3439),m(M,"class","s-pIbmxWkwpRfq"),f(M,p,99,10,3156),f(e,p,90,8,2736)},m:function(te,i){le(te,e,i),s(e,o),s(o,R),s(e,r),s(e,n),s(n,l),s(n,T),s(n,v),s(e,N),s(e,c),s(c,x),s(e,Q),s(e,A),s(A,Y),s(e,ce),s(e,y),s(y,ne),s(e,L),s(e,ee),s(ee,z),s(e,he),s(e,G),s(G,ue),s(e,de),s(e,E),s(E,ie),s(e,V),s(e,M),s(M,P),s(M,fe),s(M,F),s(F,J),s(e,_e),O||(d=[ge(P,"change",S,!1,!1,!1,!1),ge(F,"click",q,!1,!1,!1,!1)],O=!0)},p:function(te,i){t=te,i&1&&a!==(a=t[7].inquiry_id+"")&&$(R,a),i&1&&u!==(u=t[7].first_name+"")&&$(l,u),i&1&&B!==(B=t[7].last_name+"")&&$(v,B),i&1&&H!==(H=t[7].phone+"")&&$(x,H),i&1&&D!==(D=t[7].service+"")&&$(Y,D),i&1&&ae!==(ae=(t[7].caliper_color||"N/A")+"")&&$(ne,ae),i&1&&se!==(se=(t[7].wheel_color||"N/A")+"")&&$(z,se),i&1&&j!==(j=new Date(t[7].date).toLocaleDateString()+"")&&$(ue,j),i&1&&oe!==(oe=(t[7].additional_details||"N/A")+"")&&$(ie,oe),i&1&&U!==(U=t[7].quoted_price||"")&&P.value!==U&&Pe(P,"value",U),i&5&&C!==(C=t[7].isSaved?"Saved!":t[2]===t[7].inquiry_id?"Saving...":"Save")&&$(J,C),i&5&&I!==(I=t[2]===t[7].inquiry_id)&&Pe(F,"disabled",I)},d:function(te){te&&b(e),O=!1,Oe(d)}};return pe("SvelteRegisterBlock",{block:re,id:we.name,type:"each",source:"(90:6) {#each data.inquiries as inquiry}",ctx:t}),re}function Ce(t){let e,o="Finalize Bookings",a,R,r,n="Inquiries Page",u,l,T,B,v,N,c="Client ID #",H,x,Q="Customer Name",A,D,Y="Phone",ce,y,ae="Service",ne,L,ee="Caliper Color",se,z,he="Wheel Color",G,j,ue="Appointment Date",de,E,oe="Additional Details",ie,V,M="Quoted Price",P,U,fe,F,C=t[1].length>0&&qe(t),J=be(t[0].inquiries),I=[];for(let O=0;O<J.length;O+=1)I[O]=we(Ne(t,J,O));const _e={c:function(){e=h("h1"),e.textContent=o,a=k(),R=h("div"),r=h("button"),r.textContent=n,u=k(),C&&C.c(),l=k(),T=h("table"),B=h("thead"),v=h("tr"),N=h("th"),N.textContent=c,H=k(),x=h("th"),x.textContent=Q,A=k(),D=h("th"),D.textContent=Y,ce=k(),y=h("th"),y.textContent=ae,ne=k(),L=h("th"),L.textContent=ee,se=k(),z=h("th"),z.textContent=he,G=k(),j=h("th"),j.textContent=ue,de=k(),E=h("th"),E.textContent=oe,ie=k(),V=h("th"),V.textContent=M,P=k(),U=h("tbody");for(let d=0;d<I.length;d+=1)I[d].c();this.h()},l:function(d){e=_(d,"H1",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1kpx2qg"&&(e.textContent=o),a=w(d),R=_(d,"DIV",{class:!0});var S=W(R);r=_(S,"BUTTON",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-kz0a3s"&&(r.textContent=n),S.forEach(b),u=w(d),C&&C.l(d),l=w(d),T=_(d,"TABLE",{class:!0});var q=W(T);B=_(q,"THEAD",{});var re=W(B);v=_(re,"TR",{});var g=W(v);N=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(N)!=="svelte-1tvy9dd"&&(N.textContent=c),H=w(g),x=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(x)!=="svelte-1ghw50j"&&(x.textContent=Q),A=w(g),D=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(D)!=="svelte-1mpo9xu"&&(D.textContent=Y),ce=w(g),y=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-ocswmz"&&(y.textContent=ae),ne=w(g),L=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(L)!=="svelte-5ertrt"&&(L.textContent=ee),se=w(g),z=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(z)!=="svelte-1mvyyuq"&&(z.textContent=he),G=w(g),j=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(j)!=="svelte-1t9x825"&&(j.textContent=ue),de=w(g),E=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(E)!=="svelte-kdqpx"&&(E.textContent=oe),ie=w(g),V=_(g,"TH",{class:!0,"data-svelte-h":!0}),K(V)!=="svelte-1s61ncv"&&(V.textContent=M),g.forEach(b),re.forEach(b),P=w(q),U=_(q,"TBODY",{});var te=W(U);for(let i=0;i<I.length;i+=1)I[i].l(te);te.forEach(b),q.forEach(b),this.h()},h:function(){m(e,"class","centered-title s-pIbmxWkwpRfq"),f(e,p,50,2,1718),m(r,"class","sort-button finalize-button s-pIbmxWkwpRfq"),f(r,p,54,4,1845),m(R,"class","sort-buttons-container s-pIbmxWkwpRfq"),f(R,p,53,2,1803),m(N,"class","s-pIbmxWkwpRfq"),f(N,p,77,8,2378),m(x,"class","s-pIbmxWkwpRfq"),f(x,p,78,8,2408),m(D,"class","s-pIbmxWkwpRfq"),f(D,p,79,8,2440),m(y,"class","s-pIbmxWkwpRfq"),f(y,p,80,8,2464),m(L,"class","s-pIbmxWkwpRfq"),f(L,p,81,8,2490),m(z,"class","s-pIbmxWkwpRfq"),f(z,p,82,8,2522),m(j,"class","s-pIbmxWkwpRfq"),f(j,p,83,8,2552),m(E,"class","s-pIbmxWkwpRfq"),f(E,p,84,8,2587),m(V,"class","s-pIbmxWkwpRfq"),f(V,p,85,8,2624),f(v,p,76,6,2364),f(B,p,75,4,2349),f(U,p,88,4,2678),m(T,"class","inquiries-table s-pIbmxWkwpRfq"),f(T,p,74,2,2312)},m:function(d,S){le(d,e,S),le(d,a,S),le(d,R,S),s(R,r),le(d,u,S),C&&C.m(d,S),le(d,l,S),le(d,T,S),s(T,B),s(B,v),s(v,N),s(v,H),s(v,x),s(v,A),s(v,D),s(v,ce),s(v,y),s(v,ne),s(v,L),s(v,se),s(v,z),s(v,G),s(v,j),s(v,de),s(v,E),s(v,ie),s(v,V),s(T,P),s(T,U);for(let q=0;q<I.length;q+=1)I[q]&&I[q].m(U,null);fe||(F=ge(r,"click",t[4],!1,!1,!1,!1),fe=!0)},p:function(d,[S]){if(d[1].length>0?C?C.p(d,S):(C=qe(d),C.c(),C.m(l.parentNode,l)):C&&(C.d(1),C=null),S&13){J=be(d[0].inquiries);let q;for(q=0;q<J.length;q+=1){const re=Ne(d,J,q);I[q]?I[q].p(re,S):(I[q]=we(re),I[q].c(),I[q].m(U,null))}for(;q<I.length;q+=1)I[q].d(1);I.length=J.length}},i:Se,o:Se,d:function(d){d&&(b(e),b(a),b(R),b(u),b(l),b(T)),C&&C.d(d),Ae(I,d),fe=!1,F()}};return pe("SvelteRegisterBlock",{block:_e,id:Ce.name,type:"component",source:"",ctx:t}),_e}function Ve(t,e,o){let{$$slots:a={},$$scope:R}=e;Fe("Page",a,[]);let{data:r}=e,n=[],u=null;async function l(c,H){o(2,u=c);const x=new FormData;x.append("inquiry_id",c),x.append("quoted_price",H);try{if((await fetch("?/updatePrice",{method:"POST",body:x})).ok){const A={text:`Inquiry ${c} saved successfully!`,id:Date.now()};o(1,n=[...n,A]),setTimeout(()=>{o(1,n=n.filter(Y=>Y.id!==A.id))},1e4);const D=r.inquiries.find(Y=>Y.inquiry_id===c);D&&(D.quoted_price=H),D.isSaved=!0}else console.error("Failed to save inquiry")}catch(Q){console.error("Error saving inquiry:",Q)}finally{o(2,u=null)}}t.$$.on_mount.push(function(){r===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&Be.warn("<Page> was created without expected prop 'data'")});const T=["data"];Object.keys(e).forEach(c=>{!~T.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&Be.warn(`<Page> was created with unknown prop '${c}'`)});const B=()=>window.location.href="/inquiries/",v=(c,H,x,Q)=>o(0,H[x].quoted_price=Q.target.value,r),N=c=>l(c.inquiry_id,c.quoted_price);return t.$$set=c=>{"data"in c&&o(0,r=c.data)},t.$capture_state=()=>({data:r,messages:n,loadingButtonId:u,handleSave:l}),t.$inject_state=c=>{"data"in c&&o(0,r=c.data),"messages"in c&&o(1,n=c.messages),"loadingButtonId"in c&&o(2,u=c.loadingButtonId)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[r,n,u,l,B,v,N]}class Ge extends ze{constructor(e){super(e),Ue(this,e,Ve,Ce,je,{data:0}),pe("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Ce.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ge as component};
