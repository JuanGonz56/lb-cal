import{s as Ie,a as f,n as Ze,r as Ae}from"../chunks/scheduler.B2r9yBIf.js";import{S as je,i as Oe,d as _e,o as ge,v as ze,e as h,s as P,c as v,l as G,g as R,a as w,f as g,m as p,h as se,j as n,n as be,p as He,t as J,b as K,k as $,q as Ee}from"../chunks/index.hWTjKFm_.js";import{g as Ue}from"../chunks/globals.D0QH3NT1.js";const{console:Se}=Ue,_="C:/Users/chorr/OneDrive/Desktop/lb-cal/src/routes/finalizeBook/+page.svelte";function Be(t,e,o){const l=t.slice();return l[7]=e[o],l[8]=e,l[9]=o,l}function Ne(t,e,o){const l=t.slice();return l[10]=e[o],l}function Ce(t){let e,o=ge(t[1]),l=[];for(let r=0;r<o.length;r+=1)l[r]=Pe(Ne(t,o,r));const q={c:function(){e=h("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l:function(a){e=v(a,"DIV",{class:!0});var d=w(e);for(let s=0;s<l.length;s+=1)l[s].l(d);d.forEach(g),this.h()},h:function(){p(e,"class","messages-container s-vZQ5RXP3fVdn"),f(e,_,64,4,2080)},m:function(a,d){se(a,e,d);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p:function(a,d){if(d&2){o=ge(a[1]);let s;for(s=0;s<o.length;s+=1){const k=Ne(a,o,s);l[s]?l[s].p(k,d):(l[s]=Pe(k),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d:function(a){a&&g(e),He(l,a)}};return _e("SvelteRegisterBlock",{block:q,id:Ce.name,type:"if",source:"(64:2) {#if messages.length > 0}",ctx:t}),q}function Pe(t){let e,o=t[10].text+"",l,q;const r={c:function(){e=h("div"),l=J(o),q=P(),this.h()},l:function(d){e=v(d,"DIV",{class:!0});var s=w(e);l=K(s,o),q=R(s),s.forEach(g),this.h()},h:function(){p(e,"class","success-message s-vZQ5RXP3fVdn"),f(e,_,66,8,2157)},m:function(d,s){se(d,e,s),n(e,l),n(e,q)},p:function(d,s){s&2&&o!==(o=d[10].text+"")&&$(l,o)},d:function(d){d&&g(e)}};return _e("SvelteRegisterBlock",{block:r,id:Pe.name,type:"each",source:"(66:6) {#each messages as message}",ctx:t}),r}function Re(t){let e,o,l=t[7].inquiry_id+"",q,r,a,d=t[7].first_name+"",s,k,S=t[7].last_name+"",m,B,c,N=t[7].phone+"",D,x,H,Q=t[7].service+"",M,ce,y,le=(t[7].caliper_color||"N/A")+"",ae,U,ee,ne=(t[7].wheel_color||"N/A")+"",j,he,W,I=new Date(t[7].date).toLocaleDateString()+"",de,ue,X,oe=(t[7].additional_details||"N/A")+"",ie,F,L,E,O,fe,z,T=t[7].isSaved?"Saved!":t[2]===t[7].inquiry_id?"Saving...":"Save",Y,V,ve,A,u;function Z(...b){return t[5](t[7],t[8],t[9],...b)}function C(){return t[6](t[7])}const re={c:function(){e=h("tr"),o=h("td"),q=J(l),r=P(),a=h("td"),s=J(d),k=P(),m=J(S),B=P(),c=h("td"),D=J(N),x=P(),H=h("td"),M=J(Q),ce=P(),y=h("td"),ae=J(le),U=P(),ee=h("td"),j=J(ne),he=P(),W=h("td"),de=J(I),ue=P(),X=h("td"),ie=J(oe),F=P(),L=h("td"),E=h("input"),fe=P(),z=h("button"),Y=J(T),ve=P(),this.h()},l:function(te){e=v(te,"TR",{});var i=w(e);o=v(i,"TD",{class:!0});var Ve=w(o);q=K(Ve,l),Ve.forEach(g),r=R(i),a=v(i,"TD",{class:!0});var me=w(a);s=K(me,d),k=R(me),m=K(me,S),me.forEach(g),B=R(i),c=v(i,"TD",{class:!0});var qe=w(c);D=K(qe,N),qe.forEach(g),x=R(i),H=v(i,"TD",{class:!0});var ke=w(H);M=K(ke,Q),ke.forEach(g),ce=R(i),y=v(i,"TD",{class:!0});var De=w(y);ae=K(De,le),De.forEach(g),U=R(i),ee=v(i,"TD",{class:!0});var Qe=w(ee);j=K(Qe,ne),Qe.forEach(g),he=R(i),W=v(i,"TD",{class:!0});var we=w(W);de=K(we,I),we.forEach(g),ue=R(i),X=v(i,"TD",{class:!0});var ye=w(X);ie=K(ye,oe),ye.forEach(g),F=R(i),L=v(i,"TD",{class:!0});var pe=w(L);E=v(pe,"INPUT",{type:!0,placeholder:!0,class:!0}),fe=R(pe),z=v(pe,"BUTTON",{class:!0});var Xe=w(z);Y=K(Xe,T),Xe.forEach(g),pe.forEach(g),ve=R(i),i.forEach(g),this.h()},h:function(){p(o,"class","s-vZQ5RXP3fVdn"),f(o,_,91,10,2752),p(a,"class","s-vZQ5RXP3fVdn"),f(a,_,92,10,2793),p(c,"class","s-vZQ5RXP3fVdn"),f(c,_,93,10,2854),p(H,"class","s-vZQ5RXP3fVdn"),f(H,_,94,10,2890),p(y,"class","s-vZQ5RXP3fVdn"),f(y,_,95,10,2928),p(ee,"class","s-vZQ5RXP3fVdn"),f(ee,_,96,10,2981),p(W,"class","s-vZQ5RXP3fVdn"),f(W,_,97,10,3032),p(X,"class","s-vZQ5RXP3fVdn"),f(X,_,98,10,3098),p(E,"type","number"),p(E,"placeholder","Enter price"),E.value=O=t[7].quoted_price||"",p(E,"class","price-input s-vZQ5RXP3fVdn"),f(E,_,100,12,3174),p(z,"class","action-button finalize-button s-vZQ5RXP3fVdn"),z.disabled=V=t[2]===t[7].inquiry_id,f(z,_,107,12,3439),p(L,"class","s-vZQ5RXP3fVdn"),f(L,_,99,10,3156),f(e,_,90,8,2736)},m:function(te,i){se(te,e,i),n(e,o),n(o,q),n(e,r),n(e,a),n(a,s),n(a,k),n(a,m),n(e,B),n(e,c),n(c,D),n(e,x),n(e,H),n(H,M),n(e,ce),n(e,y),n(y,ae),n(e,U),n(e,ee),n(ee,j),n(e,he),n(e,W),n(W,de),n(e,ue),n(e,X),n(X,ie),n(e,F),n(e,L),n(L,E),n(L,fe),n(L,z),n(z,Y),n(e,ve),A||(u=[be(E,"change",Z,!1,!1,!1,!1),be(z,"click",C,!1,!1,!1,!1)],A=!0)},p:function(te,i){t=te,i&1&&l!==(l=t[7].inquiry_id+"")&&$(q,l),i&1&&d!==(d=t[7].first_name+"")&&$(s,d),i&1&&S!==(S=t[7].last_name+"")&&$(m,S),i&1&&N!==(N=t[7].phone+"")&&$(D,N),i&1&&Q!==(Q=t[7].service+"")&&$(M,Q),i&1&&le!==(le=(t[7].caliper_color||"N/A")+"")&&$(ae,le),i&1&&ne!==(ne=(t[7].wheel_color||"N/A")+"")&&$(j,ne),i&1&&I!==(I=new Date(t[7].date).toLocaleDateString()+"")&&$(de,I),i&1&&oe!==(oe=(t[7].additional_details||"N/A")+"")&&$(ie,oe),i&1&&O!==(O=t[7].quoted_price||"")&&E.value!==O&&Ee(E,"value",O),i&5&&T!==(T=t[7].isSaved?"Saved!":t[2]===t[7].inquiry_id?"Saving...":"Save")&&$(Y,T),i&5&&V!==(V=t[2]===t[7].inquiry_id)&&Ee(z,"disabled",V)},d:function(te){te&&g(e),A=!1,Ae(u)}};return _e("SvelteRegisterBlock",{block:re,id:Re.name,type:"each",source:"(90:6) {#each data.inquiries as inquiry}",ctx:t}),re}function Te(t){let e,o="Finalize Bookings",l,q,r,a="Inquiries Page",d,s,k,S,m,B,c="Client ID #",N,D,x="Customer Name",H,Q,M="Phone",ce,y,le="Service",ae,U,ee="Caliper Color",ne,j,he="Wheel Color",W,I,de="Appointment Date",ue,X,oe="Additional Details",ie,F,L="Quoted Price",E,O,fe,z,T=t[1].length>0&&Ce(t),Y=ge(t[0].inquiries),V=[];for(let A=0;A<Y.length;A+=1)V[A]=Re(Be(t,Y,A));const ve={c:function(){e=h("h1"),e.textContent=o,l=P(),q=h("div"),r=h("button"),r.textContent=a,d=P(),T&&T.c(),s=P(),k=h("table"),S=h("thead"),m=h("tr"),B=h("th"),B.textContent=c,N=P(),D=h("th"),D.textContent=x,H=P(),Q=h("th"),Q.textContent=M,ce=P(),y=h("th"),y.textContent=le,ae=P(),U=h("th"),U.textContent=ee,ne=P(),j=h("th"),j.textContent=he,W=P(),I=h("th"),I.textContent=de,ue=P(),X=h("th"),X.textContent=oe,ie=P(),F=h("th"),F.textContent=L,E=P(),O=h("tbody");for(let u=0;u<V.length;u+=1)V[u].c();this.h()},l:function(u){e=v(u,"H1",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1kpx2qg"&&(e.textContent=o),l=R(u),q=v(u,"DIV",{class:!0});var Z=w(q);r=v(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-kz0a3s"&&(r.textContent=a),Z.forEach(g),d=R(u),T&&T.l(u),s=R(u),k=v(u,"TABLE",{class:!0});var C=w(k);S=v(C,"THEAD",{});var re=w(S);m=v(re,"TR",{});var b=w(m);B=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(B)!=="svelte-1tvy9dd"&&(B.textContent=c),N=R(b),D=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(D)!=="svelte-1ghw50j"&&(D.textContent=x),H=R(b),Q=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(Q)!=="svelte-1mpo9xu"&&(Q.textContent=M),ce=R(b),y=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(y)!=="svelte-ocswmz"&&(y.textContent=le),ae=R(b),U=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(U)!=="svelte-5ertrt"&&(U.textContent=ee),ne=R(b),j=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(j)!=="svelte-1mvyyuq"&&(j.textContent=he),W=R(b),I=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(I)!=="svelte-1t9x825"&&(I.textContent=de),ue=R(b),X=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(X)!=="svelte-kdqpx"&&(X.textContent=oe),ie=R(b),F=v(b,"TH",{class:!0,"data-svelte-h":!0}),G(F)!=="svelte-1s61ncv"&&(F.textContent=L),b.forEach(g),re.forEach(g),E=R(C),O=v(C,"TBODY",{});var te=w(O);for(let i=0;i<V.length;i+=1)V[i].l(te);te.forEach(g),C.forEach(g),this.h()},h:function(){p(e,"class","centered-title s-vZQ5RXP3fVdn"),f(e,_,50,2,1718),p(r,"class","sort-button finalize-button s-vZQ5RXP3fVdn"),f(r,_,54,4,1845),p(q,"class","sort-buttons-container s-vZQ5RXP3fVdn"),f(q,_,53,2,1803),p(B,"class","s-vZQ5RXP3fVdn"),f(B,_,77,8,2378),p(D,"class","s-vZQ5RXP3fVdn"),f(D,_,78,8,2408),p(Q,"class","s-vZQ5RXP3fVdn"),f(Q,_,79,8,2440),p(y,"class","s-vZQ5RXP3fVdn"),f(y,_,80,8,2464),p(U,"class","s-vZQ5RXP3fVdn"),f(U,_,81,8,2490),p(j,"class","s-vZQ5RXP3fVdn"),f(j,_,82,8,2522),p(I,"class","s-vZQ5RXP3fVdn"),f(I,_,83,8,2552),p(X,"class","s-vZQ5RXP3fVdn"),f(X,_,84,8,2587),p(F,"class","s-vZQ5RXP3fVdn"),f(F,_,85,8,2624),f(m,_,76,6,2364),f(S,_,75,4,2349),f(O,_,88,4,2678),p(k,"class","inquiries-table s-vZQ5RXP3fVdn"),f(k,_,74,2,2312)},m:function(u,Z){se(u,e,Z),se(u,l,Z),se(u,q,Z),n(q,r),se(u,d,Z),T&&T.m(u,Z),se(u,s,Z),se(u,k,Z),n(k,S),n(S,m),n(m,B),n(m,N),n(m,D),n(m,H),n(m,Q),n(m,ce),n(m,y),n(m,ae),n(m,U),n(m,ne),n(m,j),n(m,W),n(m,I),n(m,ue),n(m,X),n(m,ie),n(m,F),n(k,E),n(k,O);for(let C=0;C<V.length;C+=1)V[C]&&V[C].m(O,null);fe||(z=be(r,"click",t[4],!1,!1,!1,!1),fe=!0)},p:function(u,[Z]){if(u[1].length>0?T?T.p(u,Z):(T=Ce(u),T.c(),T.m(s.parentNode,s)):T&&(T.d(1),T=null),Z&13){Y=ge(u[0].inquiries);let C;for(C=0;C<Y.length;C+=1){const re=Be(u,Y,C);V[C]?V[C].p(re,Z):(V[C]=Re(re),V[C].c(),V[C].m(O,null))}for(;C<V.length;C+=1)V[C].d(1);V.length=Y.length}},i:Ze,o:Ze,d:function(u){u&&(g(e),g(l),g(q),g(d),g(s),g(k)),T&&T.d(u),He(V,u),fe=!1,z()}};return _e("SvelteRegisterBlock",{block:ve,id:Te.name,type:"component",source:"",ctx:t}),ve}function Fe(t,e,o){let{$$slots:l={},$$scope:q}=e;ze("Page",l,[]);let{data:r}=e,a=[],d=null;async function s(c,N){o(2,d=c);const D=new FormData;D.append("inquiry_id",c),D.append("quoted_price",N);try{if((await fetch("?/updatePrice",{method:"POST",body:D})).ok){const H={text:`Inquiry ${c} saved successfully!`,id:Date.now()};o(1,a=[...a,H]),setTimeout(()=>{o(1,a=a.filter(M=>M.id!==H.id))},1e4);const Q=r.inquiries.find(M=>M.inquiry_id===c);Q&&(Q.quoted_price=N),Q.isSaved=!0}else console.error("Failed to save inquiry")}catch(x){console.error("Error saving inquiry:",x)}finally{o(2,d=null)}}t.$$.on_mount.push(function(){r===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&Se.warn("<Page> was created without expected prop 'data'")});const k=["data"];Object.keys(e).forEach(c=>{!~k.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&Se.warn(`<Page> was created with unknown prop '${c}'`)});const S=()=>window.location.href="/inquiries/",m=(c,N,D,x)=>o(0,N[D].quoted_price=x.target.value,r),B=c=>s(c.inquiry_id,c.quoted_price);return t.$$set=c=>{"data"in c&&o(0,r=c.data)},t.$capture_state=()=>({data:r,messages:a,loadingButtonId:d,handleSave:s}),t.$inject_state=c=>{"data"in c&&o(0,r=c.data),"messages"in c&&o(1,a=c.messages),"loadingButtonId"in c&&o(2,d=c.loadingButtonId)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[r,a,d,s,S,m,B]}class We extends je{constructor(e){super(e),Oe(this,e,Fe,Te,Ie,{data:0}),_e("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Te.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{We as component};
